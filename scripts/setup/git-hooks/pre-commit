#!/bin/bash
# Git pre-commit hook: Java íŒŒì¼ì´ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ Spotless ê²€ì‚¬ ì‹¤í–‰

if git diff --cached --name-only | grep -E '\.java$' > /dev/null; then
  echo "ğŸ§ª Java íŒŒì¼ ë³€ê²½ ê°ì§€ë¨ â†’ ìŠ¤íƒ€ì¼ ê²€ì‚¬ ì‹¤í–‰"

  ./gradlew spotlessCheck || {
    echo ""
    echo "âŒ ì½”ë“œ ìŠ¤íƒ€ì¼ ê²€ì‚¬ ì‹¤íŒ¨!"
    echo "ğŸ’¡ ìë™ ìˆ˜ì •í•˜ë ¤ë©´ './gradlew spotlessApply' ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”."
    ./gradlew spotlessDiagnose
    exit 1
  }
else
  echo "âœ… Java íŒŒì¼ ë³€ê²½ ì—†ìŒ â†’ ìŠ¤íƒ€ì¼ ê²€ì‚¬ ê±´ë„ˆëœ€"
fi